(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a.p+"static/media/loading.c5590569.svg"},165:function(e,t,a){e.exports=a(322)},257:function(e,t,a){},258:function(e,t,a){},322:function(e,t,a){"use strict";a.r(t);var n=a(132),i=a.n(n),l=(a(257),a(0)),s=a.n(l),r=a(325),o=a(24),c=a(25),u=a(36),h=a(35),d=a(37),m=(a(258),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){this.setState({readStory:!1})}},{key:"goTo",value:function(e){this.props.history.replace("/".concat(e))}},{key:"componentWillReceiveProps",value:function(e,t){}},{key:"login",value:function(){this.props.auth.login()}},{key:"readStory",value:function(){this.setState({readStory:!0}),this.props.history.replace("/home")}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentDidMount",value:function(){var e=this.props.auth.renewSession;"true"===localStorage.getItem("isLoggedIn")&&e()}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=this.state.readStory,a="/home"===this.props.history.location.pathname;return console.log(a,"isHomepage ==>"),s.a.createElement("div",{className:"container"},!e()&&!t&&!a&&s.a.createElement("div",{className:"splash"},s.a.createElement("div",{className:"center"},s.a.createElement("div",{className:"details"},s.a.createElement("h1",null,"Telling Tale('s)"),s.a.createElement("br",null),s.a.createElement("ul",null,s.a.createElement("li",null,"Create Story/Tale and Share with the world")),s.a.createElement("div",{className:"options"},s.a.createElement("p",null,s.a.createElement("a",{href:"https://tales.humanassistai.com",target:"_blank"},"Create your story (s) with us")," "),s.a.createElement("div",{className:""},s.a.createElement("button",{className:"button",onClick:this.readStory.bind(this)},s.a.createElement("span",null,"Read Tales "))))),s.a.createElement("div",{className:"bookshelf"},s.a.createElement("div",{className:"shelf"},s.a.createElement("div",{className:"row-1"},s.a.createElement("div",{className:"loc"},s.a.createElement("div",null,"  ",s.a.createElement("a",{onClick:this.readStory.bind(this)},s.a.createElement("div",{className:"sample thumb1"})," ")),s.a.createElement("div",null,"  "),s.a.createElement("div",null,"  "))),s.a.createElement("div",{className:"row-2"},s.a.createElement("div",{className:"loc"},s.a.createElement("div",null," "),s.a.createElement("div",null,"  "),s.a.createElement("div",null,"  ")))),s.a.createElement("div",{className:"suggestion"},"\u2191 Pick stories from our shelf")))),e()&&"")}}]),t}(l.Component)),p=a(27),g=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"login",value:function(){this.props.auth.login()}},{key:"render",value:function(){this.props.auth.isAuthenticated;return s.a.createElement(p.d,{app:"good-books-ds",credentials:"nY6NNTZZ6:27b76b9f-18ea-456c-bc5e-3a5263ebc63d"},s.a.createElement("div",{className:"navbar"},s.a.createElement("div",{className:"logo"},"Tales ..."),s.a.createElement(p.a,{className:"datasearch",componentId:"mainSearch",dataField:["original_title","original_title.search","authors","authors.search"],queryFormat:"and",placeholder:"Search for a book title or an author",innerClass:{input:"searchbox",list:"suggestionlist"},autosuggest:!1,iconPosition:"left",filterLabel:"search"})),s.a.createElement("div",{className:"display"},s.a.createElement("div",{className:"leftSidebar"},s.a.createElement(p.g,{className:"sidebarlist",componentId:"ratingsFilter",dataField:"average_rating_rounded",title:"Book Ratings",data:[{start:4,end:5,label:"\u2605\u2605\u2605\u2605 & up"},{start:3,end:5,label:"\u2605\u2605\u2605 & up"},{start:2,end:5,label:"\u2605\u2605 & up"},{start:1,end:5,label:"\u2605 & up"}],react:{and:"mainSearch"},filterLabel:"Ratings"}),s.a.createElement(p.c,{componentId:"publishFilter",dataField:"original_publication_year",title:"Year of Publication",filterLabel:"published",range:{start:1970,end:2017},rangeLabels:{start:"1970",end:"2017"},interval:2}),s.a.createElement(p.b,{componentId:"authorFilter",dataField:"authors.raw",title:"Authors",size:1e3,showCheckbox:!1,className:"authors",innerClass:{list:"author-list"},placeholder:"Filter by author name",filterLabel:"Authors"})),s.a.createElement("div",{className:"mainBar"},s.a.createElement(p.f,null),s.a.createElement(p.e,{componentId:"results",dataField:"original_title",react:{and:["mainSearch","ratingsFilter","publishFilter","authorFilter"]},pagination:!0,size:9,sortOptions:[{dataField:"average_rating",sortBy:"desc",label:"Ratings (High to low)"},{dataField:"original_title.raw",sortBy:"asc",label:"Title A->Z"},{dataField:"original_title.raw",sortBy:"desc",label:"Title Z->A"}],onData:function(e){return{image:e.image,title:e.original_title||" ",description:e.average_rating+" \u2605 <span style='float:right;margin-right:5px;'>Pub: "+e.original_publication_year+"</span><br/><br/><div class='result-author' title='"+e.authors+"'>by "+e.authors+"</div>",url:"https://google.com/search?q="+e.original_title}},className:"result-data",innerClass:{image:"result-image",resultStats:"result-stats"}}))))}}]),t}(l.Component),b=a(139),v=a.n(b),k=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{style:{position:"absolute",display:"flex",justifyContent:"center",height:"100vh",width:"100vw",top:0,bottom:0,left:0,right:0,backgroundColor:"white"}},s.a.createElement("img",{src:v.a,alt:"loading"}))}}]),t}(l.Component),f=(0,a(26).createBrowserHistory)(),E=a(140),y={domain:"unspokentales.auth0.com",clientId:"730S2VhbMLOZZMGQJlaHAO1z4U6smLMZ",callbackUrl:"http://localhost:3000/callback"},T=new(function(){function e(){Object(o.a)(this,e),this.auth0=new E.a.WebAuth({domain:y.domain,clientID:y.clientId,redirectUri:y.callbackUrl,responseType:"token id_token",scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this)}return Object(c.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(){var e=this;this.auth0.parseHash(function(t,a){a&&a.accessToken&&a.idToken?e.setSession(a):t&&(f.replace("/home"),console.log(t),alert("Error: ".concat(t.error,". Check the console for further details.")))})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true");var t=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t,f.replace("/home")}},{key:"renewSession",value:function(){var e=this;this.auth0.checkSession({},function(t,a){a&&a.accessToken&&a.idToken?e.setSession(a):t&&(e.logout(),console.log(t),alert("Could not get a new token (".concat(t.error,": ").concat(t.error_description,").")))})}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),f.replace("/home")}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}}]),e}()),w=s.a.createElement(r.b,{history:f},s.a.createElement("div",null,s.a.createElement(r.a,{path:"/",render:function(e){return s.a.createElement(m,Object.assign({auth:T},e))}}),s.a.createElement(r.a,{path:"/home",render:function(e){return s.a.createElement(g,Object.assign({auth:T},e))}}),s.a.createElement(r.a,{path:"/callback",render:function(e){return function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&T.handleAuthentication()}(e),s.a.createElement(k,e)}})));i.a.render(w,document.getElementById("root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.738d8b75.chunk.js.map